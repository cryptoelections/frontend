<div class="card" [ngClass]="{'card-disabled': country && !country.active }">
  <div class="card-block country-img-card align-items-center">
    <img
      class="card-img"
      [src]="imageLink"
      onerror="this.src = 'assets/images/no-flag.png'"
      alt=""
    >
  </div>
  <div class="card-block country-card">
    <h3 class="card-title text-center">{{ country.name }}</h3>
    <p class="card-text">
      <span><b>{{ numberOfCities }} {{(numberOfCities === 1 ? 'COUNTRY.CARD.CITY' : 'COUNTRY.CARD.CITIES')  | translate }}</b></span>

      <span *ngIf="!!cityPriceRange().lowestPrice"> {{ cityPriceRange().lowestPrice | eth }}<span
        *ngIf="!!cityPriceRange().highestPrice"> - {{ cityPriceRange().highestPrice | eth }}</span> ETH</span><br/>

      <span><b>{{ myCities?.length }}</b> {{('COUNTRY.CARD.' + (myCities?.length === 1 ? 'CITY' : 'CITIES')) | translate }}
        {{ 'COUNTRY.CARD.UNDER_YOUR_CONTROL' | translate }}</span><br/>

      <span><b>{{ electorate | convert }}</b> {{ 'COUNTRY.CARD.OF_ELECTORATE' | translate }}</span><br/>

      <span><b>{{ myElectorate | convert }}</b> {{ 'COUNTRY.CARD.SUPPORT_YOU' | translate }}</span><br/>

      <app-parameters-pair
        [name]="'COUNTRY.CARD.PRESIDENT' | translate"
        [value]="president"
      ></app-parameters-pair>
    </p>
  </div>
  <div class="card-button-block text-center">
    <ng-container *ngIf="!isYours && country.active">
      <button class="btn card-button">
        <span>{{'COUNTRY.CARD.INVEST' | translate }} <b>{{ price | eth }} ETH </b></span>
      </button>
      <span>{{'COUNTRY.CARD.TO_WIN' | translate }}</span>
    </ng-container>
    <ng-container *ngIf="isYours && country.active">
      <div class="president-sign" (click)="openModal(cityList)"> <!-- on click open modal -->
        <img
          class="mr-2"
          [src]="'assets/images/sign.png'"
          alt=""
        />
        <span class="president text-left">{{ 'COUNTRY.CARD.YOU_ARE_PRESIDENT' | translate }}</span>
      </div>
    </ng-container>
    <ng-container *ngIf="!country.active">
      <div class="president-sign">
        {{ 'COUNTRY.CARD.NOT_IMPLEMENTED' | translate }}
      </div>
    </ng-container>
  </div>
</div>

<ng-template #cityList>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Modal</h4>
    <button
      type="button"
      class="close pull-right"
      aria-label="Close"
      (click)="modalRef.hide()"
    >
      <span aria-hidden="true"></span>
    </button>
  </div>
  <div class="modal-body">
    <pre>{{ costEffectiveCities[country.code] | json }}</pre>
  </div>
</ng-template>
